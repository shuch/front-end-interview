## Event Loop 事件循环
1、执行栈与任务队列
JavaScript是单线程的，为了不阻塞主线程，将任务分为两类：
- 同步任务：直接进入主线程的“执行栈”按顺序执行。
- 异步任务：进入任务队列，等待主线程空闲时被调用。

2、任务分类
在事件循环中，异步任务分为：
- 宏任务（setTimeout、setInterval、IO、Dom事件）
- 微任务（Promise.then、MutationObserver、queueMicrtask）

3、事件循环执行顺序
1. 执行同步代码：从上到下执行，直到清空执行栈。
2. 清空微任务队列：执行栈清空后，系统会一次性执行完所有微任务。
3. 执行宏任务：从宏任务队列中取出一个任务放入执行栈执行。
4. 循环：宏任务执行完毕，再次清空微任务队列

总结：执行宏任务前，必须保证当前微任务队列是空的

4、代码示例
```
console.log(1); // 同步任务

setTimeout(() => console.log(2), 0); // 宏任务

Promise.resolve().then(() => console.log(3)); // 微任务

console.log(4); // 同步任务

// 输出顺序：1 → 4 → 3 → 2
```
解析：
- 打印 1 和 4 是同步任务，优先执行。
- 同步代码运行完后，检查微任务队列，发现有 Promise.then，打印 3。
- 最后开始执行宏任务队列中的 setTimeout，打印 2。
